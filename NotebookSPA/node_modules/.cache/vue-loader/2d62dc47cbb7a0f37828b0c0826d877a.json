{"remainingRequest":"E:\\前端\\NotebookSPA\\NotebookSPA\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\前端\\NotebookSPA\\NotebookSPA\\src\\pages\\TheItemList.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\前端\\NotebookSPA\\NotebookSPA\\src\\pages\\TheItemList.vue","mtime":1607522139528},{"path":"E:\\前端\\NotebookSPA\\NotebookSPA\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1604303186290},{"path":"E:\\前端\\NotebookSPA\\NotebookSPA\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1604303177903},{"path":"E:\\前端\\NotebookSPA\\NotebookSPA\\node_modules\\babel-loader\\lib\\index.js","mtime":1604303222147},{"path":"E:\\前端\\NotebookSPA\\NotebookSPA\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1604303186290},{"path":"E:\\前端\\NotebookSPA\\NotebookSPA\\node_modules\\vue-loader\\lib\\index.js","mtime":1604303214890}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tdata: function() {\n\t\treturn {\n\t\t\tisshow: false,\n\t\t\titems: [],\n\t\t\tupdated: {\n\t\t\t\tupdateid:\"\",\n\t\t\t\titem_text: \"\",\n\t\t\t\tamount: 0,\n\t\t\t\tdate_paid: \"2020-1-1\",\n\t\t\t},\n\t\t}\n\t},\n\tmounted: function() {\n\t\tvar self = this;\n\t\t// react to route changes...\n\t\t// don't forget to call next()\n\t\tthis.$axios.get('servlet/ItemListServlet', {\n\t\t\t\tparams: {\n\t\t\t\t\tuserid: self.$store.state.user.id,\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tconsole.log(response);\n\t\t\t\tself.items = response.data;\n\t\t\t})\n\t\t\t.catch(function(error) {\n\t\t\t\talert(error);\n\t\t\t});\n\t},\n\tbeforeRouteUpdate: function(to, from, next) {\n\t\tvar self = this;\n\t\t// react to route changes...\n\t\t// don't forget to call next()\n\t\tthis.$axios.get('servlet/ItemListServlet', {\n\t\t\t\tparams: {\n\t\t\t\t\tuserid: self.$store.state.user.id,\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tconsole.log(resposne);\n\t\t\t\tself.items = response.data;\n\t\t\t})\n\t\t\t.catch(function(error) {\n\t\t\t\talert(error);\n\t\t\t});\n\t\tnext();\n\t},\n\tmethods: {\n\t\titem_del: function(id) {\n\t\t\tvar del = {\n\t\t\t\tdel_id: id\n\t\t\t}\n\t\t\tvar self = this;\n\t\t\tthis.$axios.get('servlet/ItemDeleteServlet', {\n\t\t\t\t\tparams: del\n\t\t\t\t})\n\t\t\t\t.then(function(response) {\n\t\t\t\t\tconsole.log(response);\n\t\t\t\t\tif (response.data > 0) {\n\t\t\t\t\t\talert(\"Delete Ok!\");\n\t\t\t\t\t\tself.$router.push({\n\t\t\t\t\t\t\tpath: \"/item_list\",\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tuserid: self.$store.state.user.id,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\talert(\"Delete not ok!\")\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(function(error) {\n\t\t\t\t\tif (error.request) {\n\t\t\t\t\t\talert(error.request);\n\t\t\t\t\t}\n\t\t\t\t\talert(error);\n\t\t\t\t\tconsole.log(error.message);\n\t\t\t\t\tconsole.log(error.config);\n\t\t\t\t});\n\t\t},\n\t\titem_update: function(id) {\n\t\t\tvar self = this;\n\t\t\talert(\"update item, id = \" + id);\n\t\t\tthis.updated.updateid = id;\n\t\t\tself.isshow = !this.isshow;\n\n\t\t},\n\t\tupdate: function() {\n\t\t\tvar self = this;\n\t\t\tvar item_id = this.updated.updateid;\n\t\t\talert(\"update item, id = \" + item_id);\n\t\t\tvar item_text = this.updated.item_text;\n\t\t\tvar amount = this.updated.amount;\n\t\t\tvar date_paid = this.updated.date_paid;\n\t\t\tthis.$axios.get('servlet/ItemUpdateServlet', {\n\t\t\t\t\tparams: {\n\t\t\t\t\t\titem_id,\n\t\t\t\t\t\titem_text,\n\t\t\t\t\t\tamount,\n\t\t\t\t\t\tdate_paid,\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(function(response) {\n\t\t\t\t\tconsole.log(response);\n\t\t\t\t\tif (response.data > 0) {\n\t\t\t\t\t\talert(\"update Ok!\");\n\t\t\t\t\t\tself.$router.push({\n\t\t\t\t\t\t\tpath: \"/item_list\",\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tuserid: self.$store.state.user.id,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\talert(\"update not ok!\")\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(function(error) {\n\t\t\t\t\tif (error.request) {\n\t\t\t\t\t\talert(error.request);\n\t\t\t\t\t}\n\t\t\t\t\talert(error);\n\t\t\t\t\tconsole.log(error.message);\n\t\t\t\t\tconsole.log(error.config);\n\t\t\t\t});\n\t\t},\n\n\t}\n}\n",{"version":3,"sources":["TheItemList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"TheItemList.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<h2>Item List</h2>\r\n\t\t<table id=\"table1\" class=\"table table-hover\">\r\n\t\t\t<tr>\r\n\t\t\t\t<td>序</td>\r\n\t\t\t\t<td>支出项目</td>\r\n\t\t\t\t<td>分类</td>\r\n\t\t\t\t<td>金额</td>\r\n\t\t\t\t<td>日期</td>\r\n\t\t\t\t<td>操作</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr v-for=\"(item,index) in items\" v-bind:key=\"item.id\">\r\n\t\t\t\t<td>{{index}}</td>\r\n\t\t\t\t<td>{{item.item_text}}</td>\r\n\t\t\t\t<td>{{item.category_text}}</td>\r\n\t\t\t\t<td>{{item.amount}}</td>\r\n\t\t\t\t<td>{{item.date_paid}}</td>\r\n\t\t\t\t<td><button class='btn btn-info' v-on:click=\"item_update(item.id)\">修改</button>&nbsp;&nbsp;\r\n\t\t\t\t\t<button class=\"btn btn-danger\" v-on:click=\"item_del(item.id)\">删除</button></td>\r\n\r\n\t\t\t</tr>\r\n\t\t</table>\r\n\t\t<div v-show=\"isshow\" class=\"tab-pane\">\r\n\t\t\t<h3>修改</h3>\r\n\t\t\t<div>\r\n\t\t\t\t<label>开支项目</label>\r\n\t\t\t\t<input type=\"text\" v-model=\"updated.item_text\" class=\"form-control\" />\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<label>消费金额</label>\r\n\t\t\t\t<input type=\"text\" v-model=\"updated.amount\" class=\"form-control\" />\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<label>消费日期</label>\r\n\t\t\t\t<input type=\"date\" v-model=\"updated.date_paid\" class=\"form-control\" value='2020-01-01' />\r\n\t\t\t</div>\r\n\t\t\t<button class=\"btn btn-primary btn-block\" v-on:click=\"update()\">修改</button>\r\n\t\t</div>\r\n\t\t<h3>修改、删除之后要点到其他页面，再回来才会刷新</h3>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata: function() {\r\n\t\t\treturn {\r\n\t\t\t\tisshow: false,\r\n\t\t\t\titems: [],\r\n\t\t\t\tupdated: {\r\n\t\t\t\t\tupdateid:\"\",\r\n\t\t\t\t\titem_text: \"\",\r\n\t\t\t\t\tamount: 0,\r\n\t\t\t\t\tdate_paid: \"2020-1-1\",\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted: function() {\r\n\t\t\tvar self = this;\r\n\t\t\t// react to route changes...\r\n\t\t\t// don't forget to call next()\r\n\t\t\tthis.$axios.get('servlet/ItemListServlet', {\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tuserid: self.$store.state.user.id,\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(function(response) {\r\n\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\tself.items = response.data;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\talert(error);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tbeforeRouteUpdate: function(to, from, next) {\r\n\t\t\tvar self = this;\r\n\t\t\t// react to route changes...\r\n\t\t\t// don't forget to call next()\r\n\t\t\tthis.$axios.get('servlet/ItemListServlet', {\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tuserid: self.$store.state.user.id,\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(function(response) {\r\n\t\t\t\t\tconsole.log(resposne);\r\n\t\t\t\t\tself.items = response.data;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\talert(error);\r\n\t\t\t\t});\r\n\t\t\tnext();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\titem_del: function(id) {\r\n\t\t\t\tvar del = {\r\n\t\t\t\t\tdel_id: id\r\n\t\t\t\t}\r\n\t\t\t\tvar self = this;\r\n\t\t\t\tthis.$axios.get('servlet/ItemDeleteServlet', {\r\n\t\t\t\t\t\tparams: del\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(function(response) {\r\n\t\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\t\tif (response.data > 0) {\r\n\t\t\t\t\t\t\talert(\"Delete Ok!\");\r\n\t\t\t\t\t\t\tself.$router.push({\r\n\t\t\t\t\t\t\t\tpath: \"/item_list\",\r\n\t\t\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\t\tuserid: self.$store.state.user.id,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\talert(\"Delete not ok!\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\tif (error.request) {\r\n\t\t\t\t\t\t\talert(error.request);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\talert(error);\r\n\t\t\t\t\t\tconsole.log(error.message);\r\n\t\t\t\t\t\tconsole.log(error.config);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\titem_update: function(id) {\r\n\t\t\t\tvar self = this;\r\n\t\t\t\talert(\"update item, id = \" + id);\r\n\t\t\t\tthis.updated.updateid = id;\r\n\t\t\t\tself.isshow = !this.isshow;\r\n\r\n\t\t\t},\r\n\t\t\tupdate: function() {\r\n\t\t\t\tvar self = this;\r\n\t\t\t\tvar item_id = this.updated.updateid;\r\n\t\t\t\talert(\"update item, id = \" + item_id);\r\n\t\t\t\tvar item_text = this.updated.item_text;\r\n\t\t\t\tvar amount = this.updated.amount;\r\n\t\t\t\tvar date_paid = this.updated.date_paid;\r\n\t\t\t\tthis.$axios.get('servlet/ItemUpdateServlet', {\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\titem_id,\r\n\t\t\t\t\t\t\titem_text,\r\n\t\t\t\t\t\t\tamount,\r\n\t\t\t\t\t\t\tdate_paid,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(function(response) {\r\n\t\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\t\tif (response.data > 0) {\r\n\t\t\t\t\t\t\talert(\"update Ok!\");\r\n\t\t\t\t\t\t\tself.$router.push({\r\n\t\t\t\t\t\t\t\tpath: \"/item_list\",\r\n\t\t\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\t\tuserid: self.$store.state.user.id,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\talert(\"update not ok!\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\tif (error.request) {\r\n\t\t\t\t\t\t\talert(error.request);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\talert(error);\r\n\t\t\t\t\t\tconsole.log(error.message);\r\n\t\t\t\t\t\tconsole.log(error.config);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n</style>\n"]}]}